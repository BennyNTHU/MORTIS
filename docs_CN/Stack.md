# `Stack.hpp` 文件

## 概述

`Stack.hpp` 標頭檔定義了一個模板化的 `Stack` 類別，該類別實作了堆疊資料結構，提供了將元素推入堆疊、從堆疊彈出元素以及查看堆疊頂部元素的功能。堆疊支援使用 `std::variant` 來處理多種資料型別，並且繼承自 `Bag<T>` 類別以進行底層儲存的基本操作。

---

## 主要元件

### `Stack` 類別

`Stack` 類別實作了堆疊的基本操作，例如將元素添加到堆疊頂部 (`Push`)、從堆疊頂部移除元素 (`Pop`) 以及存取堆疊頂部元素 (`Top`)。

#### 成員變數：
- **`capacity`**: 堆疊在需要調整大小之前可以容納的最大元素數量。
- **`size`**: 堆疊中目前的元素數量。
- **`arr`**: 一個動態陣列（繼承自 `Bag<T>`），用於儲存堆疊的元素。

#### 建構函式與解構函式：
- **`Stack(int initial_capacity = 10)`**: 使用指定的初始容量（預設為 10）初始化堆疊。它將堆疊設置為空狀態，並將元素儲存在動態分配的陣列中。
  
  範例：
  ```cpp
  Stack<int> stack(10);  // 建立一個容量為 10 的整數堆疊
  ```

#### 操作函式：
- **`Push(const T& x)`**: 將元素 `x` 添加到堆疊的頂部。如果堆疊已滿，則可能會調整內部陣列的大小以容納更多元素。

  範例：
  ```cpp
  stack.Push(5);  // 將 5 添加到堆疊頂部
  ```

- **`Pop()`**: 從堆疊頂部移除元素。如果堆疊為空，則應安全處理此操作以避免錯誤。

  範例：
  ```cpp
  stack.Pop();  // 從堆疊頂部移除元素
  ```

#### 存取器：
- **`Top()`**: 回傳堆疊頂部的元素而不移除它。如果堆疊為空，此函式應拋出例外或回傳預設值。

  範例：
  ```cpp
  int topElement = stack.Top();  // 取得堆疊頂部的元素（不移除它）
  ```

#### 運算子重載：
- **`operator<<`**: 重載串流插入 (`<<`) 運算子，用於印出堆疊的內容。

  範例：
  ```cpp
  std::cout << stack;  // 印出堆疊的元素
  ```

---

## 範例用法

以下是一個展示如何使用 `Stack` 類別的範例：

```cpp
#include "Stack.hpp"
#include <iostream>

int main() {
    // 建立一個容量為 5 的整數堆疊
    Stack<int> stack(5);

    // 將元素推入堆疊
    stack.Push(10);  // 堆疊: 10
    stack.Push(20);  // 堆疊: 20, 10
    stack.Push(30);  // 堆疊: 30, 20, 10

    // 印出堆疊
    std::cout << "推入元素後的堆疊: " << stack << std::endl;

    // 存取堆疊頂部的元素
    std::cout << "堆疊頂部元素: " << stack.Top() << std::endl;  // 頂部: 30

    // 彈出堆疊頂部的元素
    stack.Pop();  // 堆疊: 20, 10

    // 印出彈出後的堆疊
    std::cout << "彈出後的堆疊: " << stack << std::endl;

    // 檢查彈出後的堆疊頂部元素
    std::cout << "彈出後的堆疊頂部元素: " << stack.Top() << std::endl;  // 頂部: 20

    return 0;
}
```

### 解釋：
- 程式碼建立了一個整數堆疊，並展示了如何使用 `Push()` 將元素推入堆疊。
- 然後印出堆疊，使用 `Top()` 存取堆疊頂部的元素，並使用 `Pop()` 移除堆疊頂部的元素。
- 每次操作後印出堆疊的狀態，以展示堆疊的變化。

---

## 潛在錯誤與邊界情況

1. **空堆疊操作**: 在空堆疊上執行 `Pop()` 或 `Top()` 時，請確保這些操作能夠安全處理。在呼叫這些方法之前，檢查堆疊是否為空以避免未定義行為或存取無效記憶體。

   範例：
   ```cpp
   if (!stack.IsEmpty()) {
       stack.Pop();
   }
   ```

2. **堆疊已滿**: 如果堆疊已滿並且嘗試推入元素，請確保堆疊能夠動態調整大小或處理溢出的情況。此行為取決於底層陣列的管理方式（例如，堆疊滿時將大小加倍）。

3. **索引錯誤**: 使用 `Top()` 存取堆疊頂部元素時，請確保索引在有效範圍內（即堆疊不為空）。

4. **記憶體管理**: 請確保正確處理記憶體，特別是在複製堆疊或處理底層陣列的動態記憶體時。

---

## 相依性

- **`Bag.hpp`**: `Stack` 類別繼承自 `Bag<T>` 類別，因此請確保 `Bag<T>` 類別已正確定義並包含用於動態陣列操作的方法。
- **C++ 標準函式庫**: 該類別使用 `std::variant` 來儲存異質型別，並使用串流插入運算子 (`operator<<`) 來印出堆疊的內容。
